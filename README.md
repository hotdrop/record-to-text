# RecorodToText
このアプリは**オーディオインタフェースから入力された音声**を録音し、一定期間毎に自動で文字起こしとサマリーを作成します。  
文字起こしの間隔は設定画面でカスタマイズできます。  
今の所、相手の声は拾えませんので例えばビデオ通話や音声通話を録音して文字起こしすることはできません。（制限事項の2参照）

このアプリは`macOS`に対応していますが、使用しているライブラリはモバイルデバイスやWindowsでもサポートしているため適切な環境を用意すればこれらのプラットフォームでもアプリを利用できると思います。ただし録音処理の動作確認やUIの改善が必要だと思います。

# 設計
本当は`Python`を使えばもっと柔軟に音声データの録音や処理ができたのですが、`Flutter`で実装したかったのでこうなりました。

## 録音機能
システムのオーディオ入力をキャプチャして録音します。連続性を確保するため録音は一時停止せずに連続して行い、バックグラウンドで定期的に音声データのセグメントを保存し、それらを非同期に処理するアプローチを検討します。

## テキスト変換機能
`Whisper API`を使用して文字起こしします。  
文字起こしした内容は`gpt-3.5-turbo`モデルを使用してフィラーを除去しようと考えていましたが、`Whisper API`がデフォルトでフィラーをある程度削除してくれるようなので一旦不要としました。  
使ってみて気になるようなら検討します。

## サマリー生成
各音声データの文字列を順番に結合し`gpt-4-turbo`モデルを使用してサマリーします。  
最初は指定したContext長になるまで順番につなげてサマリーを段階的に作成しようと考えましたが、今のContext長は以前に比べて格段に長くなったことと、分割してサマリーを作るより全てつなげてサマリーを作った方がブレが少ないという結論になり、まとめて作成することにしました。  

# 制限事項
1. サマリーを作成する際、Context長を考慮した作りにしていません
   1. 最初はContext長を考慮して順番に文字起こし文字列をつなげてサマリーを作ろうと思いましたが、人間が1分間に話せる文字数から逆算して検討した結果、分割してサマリーを作るより全てつなげてサマリーを作った方がブレが少ないという結論になりました。そもそもそこまで長時間の録音はしない想定で作っています。
2. ヘッドフォンやイヤホンでの録音は自分の声しかのりません
   1. 音源の出力インタフェースはFlutterのRecordでは拾えないので、イヤホンやヘッドフォンをしながらの会議などの議事録には使えません。ループバックなどのオーディオルーティングソフトウェアを使うといけるかもしれませんのでこれは次のステップで試そうと思っています。
